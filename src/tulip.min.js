function tulip(t,e=300,n=150,o=15){function i(){if(!1===l){clearTimeout(c),c=null;const e=t.querySelector(".tulip-wrap");e.classList.remove("show"),e.style.transform="",setTimeout(()=>{t.removeEventListener("mouseleave",i),t.removeEventListener("blur",i),e.removeEventListener("mouseenter",r),e.removeEventListener("mouseleave",s),document.removeEventListener("keydown",a),t.removeEventListener("click",d)},n)}}function r(){l=!0}function s(){l=!1}function a(t){"Escape"===t.key&&i()}function d(){i()}t.addEventListener("click",d),document.addEventListener("keydown",a),document.body.style.overflowX="hidden";let l=!1,c=setTimeout(()=>{m.classList.add("show"),m.style.transform=p.transform,document.body.style.overflowX="auto"},e);const m=t.querySelector(".tulip-wrap");m.addEventListener("mouseenter",r),m.addEventListener("mouseleave",s),m.style.width="max-content",m.style.transitionDuration=`${n}ms`;const p=position(t,m,o);for(const t in p)"transform"!=t&&(m.style[t]=p[t]);t.addEventListener("mouseleave",i),t.addEventListener("blur",i)}function position(t,e,n){const o=window.innerHeight,i=window.innerWidth,r=t.getBoundingClientRect(),s=r.width/2,a=e.getBoundingClientRect(),d=a.width/2;let l,c,m={};r.x+s<i-d&&r.x+s>d?l="middle":r.x+s>i-a.width?l="right":r.x+s<a.width&&(l="left"),c=r.y<a.height+n?"top":r.y+r.height>o-a.height?"bottom":"middle";const p=`${c}-${l}`;switch(p){case"top-left":m.paddingTop=`${n}px`,m.left="0",m.top=`calc(100% - ${n}px)`,m.transform=`translateY(${n}px)`;break;case"top-middle":m.paddingTop=`${n}px`,m.left="50%",m.top=`calc(100% - ${n}px)`,m.translate="-50% 0%",m.transform=`translateY(${n}px)`;break;case"top-right":m.paddingTop=`${n}px`,m.right="0",m.top=`calc(100% - ${n}px)`,m.transform=`translateY(${n}px)`;break;case"middle-left":case"bottom-left":m.paddingBottom=`${n}px`,m.left="0",m.bottom=`calc(100% - ${n}px)`,m.transform=`translateY(-${n}px)`;break;case"middle-middle":case"bottom-middle":m.paddingBottom=`${n}px`,m.left="50%",m.bottom=`calc(100% - ${n}px)`,m.translate="-50% 0%",m.transform=`translateY(-${n}px)`;break;case"middle-right":case"bottom-right":m.paddingBottom=`${n}px`,m.right="0",m.bottom=`calc(100% - ${n}px)`,m.transform=`translateY(-${n}px)`}return m}