function tulip(t,e=300,o=150,n=15){function r(){if(!1===d){clearTimeout(l),l=null;const e=t.querySelector(".tulip-wrap");e.classList.remove("show"),e.style.transform="",setTimeout(()=>{t.removeEventListener("mouseleave",r),t.removeEventListener("blur",r),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseleave",a),document.removeEventListener("keydown",s)},o)}}function i(){d=!0}function a(){d=!1}function s(t){"Escape"===t.key&&r()}document.addEventListener("keydown",s),document.body.style.overflowX="hidden";let d=!1,l=setTimeout(()=>{m.classList.add("show"),m.style.transform=c.transform,document.body.style.overflowX="auto"},e);const m=t.querySelector(".tulip-wrap");m.addEventListener("mouseenter",i),m.addEventListener("mouseleave",a),m.style.width="max-content",m.style.transitionDuration=`${o}ms`;const c=position(t,m,n);for(const t in c)"transform"!=t&&(m.style[t]=c[t]);t.addEventListener("mouseleave",r),t.addEventListener("blur",r)}function position(t,e,o){const n=window.innerHeight,r=window.innerWidth,i=t.getBoundingClientRect(),a=i.width/2,s=e.getBoundingClientRect(),d=s.width/2;let l,m,c={};i.x+a<r-d&&i.x+a>d?l="middle":i.x+a>r-s.width?l="right":i.x+a<s.width&&(l="left"),m=i.y<s.height+o?"top":i.y+i.height>n-s.height?"bottom":"middle";const p=`${m}-${l}`;switch(p){case"top-left":c.paddingTop=`${o}px`,c.left="0",c.top=`calc(100% - ${o}px)`,c.transform=`translateY(${o}px)`;break;case"top-middle":c.paddingTop=`${o}px`,c.left="50%",c.top=`calc(100% - ${o}px)`,c.translate="-50% 0%",c.transform=`translateY(${o}px)`;break;case"top-right":c.paddingTop=`${o}px`,c.right="0",c.top=`calc(100% - ${o}px)`,c.transform=`translateY(${o}px)`;break;case"middle-left":case"bottom-left":c.paddingBottom=`${o}px`,c.left="0",c.bottom=`calc(100% - ${o}px)`,c.transform=`translateY(-${o}px)`;break;case"middle-middle":case"bottom-middle":c.paddingBottom=`${o}px`,c.left="50%",c.bottom=`calc(100% - ${o}px)`,c.translate="-50% 0%",c.transform=`translateY(-${o}px)`;break;case"middle-right":case"bottom-right":c.paddingBottom=`${o}px`,c.right="0",c.bottom=`calc(100% - ${o}px)`,c.transform=`translateY(-${o}px)`}return c}